# Doraquants Backend API Tests - With Authentication
# Use this file when API_KEY is enabled in .env
# Use this file with VSCode REST Client extension

# Variables
@baseUrl = http://localhost:4000
@apiKey = doraquants_secret_key_2025

### Health Check (always accessible, no API key required)
GET {{baseUrl}}/health

### Basic API Info
GET {{baseUrl}}/api
x-api-key: {{apiKey}}

###

# Account endpoints (require valid Binance API keys)

### Get Account Balances
GET {{baseUrl}}/account
x-api-key: {{apiKey}}

###

### Get Portfolio Value in USDT
GET {{baseUrl}}/portfolio
x-api-key: {{apiKey}}

###

### Get User Trades for BTCUSDT
GET {{baseUrl}}/trades?symbol=BTCUSDT&limit=10
x-api-key: {{apiKey}}

###

# Public endpoints (no Binance API keys required)

### Get Market Data (Candlesticks) for BTCUSDT - 1 hour interval
GET {{baseUrl}}/market-data?symbol=BTCUSDT&interval=1h&limit=50
x-api-key: {{apiKey}}

###

### Get Market Data (Candlesticks) for ETHUSDT - 4 hour interval
GET {{baseUrl}}/market-data?symbol=ETHUSDT&interval=4h&limit=24
x-api-key: {{apiKey}}

###

### Get Current Prices for Popular Trading Pairs
GET {{baseUrl}}/api/binance/prices
x-api-key: {{apiKey}}

###

### Test Binance Connection Status
GET {{baseUrl}}/api/binance/status
x-api-key: {{apiKey}}

###

### Get Exchange Information
GET {{baseUrl}}/api/binance/exchange-info
x-api-key: {{apiKey}}

###

# Error testing

### Test Invalid Symbol (should return error)
GET {{baseUrl}}/market-data?symbol=INVALIDPAIR&interval=1h&limit=10
x-api-key: {{apiKey}}

###

### Test Missing Symbol Parameter (should return 400 error)
GET {{baseUrl}}/market-data?interval=1h&limit=10
x-api-key: {{apiKey}}

###

### Test Wrong API Key (should return 401 error)
GET {{baseUrl}}/api
x-api-key: wrong_api_key

###

### Test Missing API Key (should return 401 error when API_KEY is enabled)
GET {{baseUrl}}/api
